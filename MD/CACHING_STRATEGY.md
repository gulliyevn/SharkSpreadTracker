# üíæ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–±–∑–æ—Ä

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Shark Spread Tracker, –≤–∫–ª—é—á–∞—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏, React Query –∫—ç—à –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏.

---

## üóÇÔ∏è –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Vercel

**–§–∞–π–ª—ã —Å —Ö–µ—à–∞–º–∏ (assets/):**
- `Cache-Control: public, max-age=31536000, immutable`
- –ö—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 –≥–æ–¥ (immutable)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è: JS, CSS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã

**index.html:**
- `Cache-Control: public, max-age=0, must-revalidate`
- –ù–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è (–≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–≤–µ–∂–µ—Å—Ç—å)
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ bandwidth –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üîÑ React Query –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

```typescript
{
  staleTime: 30 * 1000,      // 30 —Å–µ–∫—É–Ω–¥ - –¥–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è —Å–≤–µ–∂–∏–º–∏
  gcTime: 10 * 60 * 1000,    // 10 –º–∏–Ω—É—Ç - –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫—ç—à–µ
  refetchOnWindowFocus: false, // –ù–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
  refetchOnReconnect: true,   // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
}
```

### –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- **Spread Data:** 30 —Å–µ–∫—É–Ω–¥
- **Tokens:** 2 –º–∏–Ω—É—Ç—ã

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π refetch

- –î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏–∑ hooks
- –î–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫: –∏–Ω—Ç–µ—Ä–≤–∞–ª —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 5 —Ä–∞–∑

---

## üì¶ Code Splitting –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### Chunk —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–§–∞–π–ª—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ —á–∞–Ω–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **react-vendor** - React –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è)
2. **query-vendor** - React Query (—Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è)
3. **chart-vendor** - Recharts (—Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è)
4. **i18n-vendor** - i18next (—Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è)
5. **axios-vendor** - Axios (—Ä–µ–¥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è)
6. **ui-vendor** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è)
7. **TokensPage** - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–∫–µ–Ω–æ–≤ (–º–µ–Ω—è–µ—Ç—Å—è —á–∞—â–µ)
8. **ChartsPage** - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–º–µ–Ω—è–µ—Ç—Å—è —á–∞—â–µ)
9. **index** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–º–µ–Ω—è–µ—Ç—Å—è —á–∞—â–µ)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —á–∞–Ω–∫–∏
- Vendor –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞–¥–æ–ª–≥–æ
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

---

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

### Lazy Loading

–°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é:

```typescript
const TokensPage = lazy(() => import('./pages/TokensPage'));
const ChartsPage = lazy(() => import('./pages/ChartsPage'));
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –£–º–µ–Ω—å—à–µ–Ω–∏–µ initial bundle size
- –ë—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ React Query** –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ staleTime** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ lazy loading** –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ bundle size** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –î–ª—è production

1. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ Cache Hit Ratio** –≤ Vercel Analytics
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä bundle** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** (WebP, —Å–∂–∞—Ç–∏–µ)
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN** –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

- **Bundle size:** ~250 KB gzipped ‚úÖ
- **Cache-Control:** –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ ‚úÖ
- **React Query cache:** 10 –º–∏–Ω—É—Ç ‚úÖ
- **Code splitting:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚úÖ

### –¶–µ–ª–∏

- Bundle size < 500 KB gzipped ‚úÖ
- Cache hit ratio > 80%
- First Contentful Paint < 1.5s
- Time to Interactive < 3s

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### Vercel

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `vercel.json`:

```json
{
  "headers": [
    {
      "source": "/assets/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
```

### React Query

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `src/lib/react-query.ts`:

```typescript
export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 30 * 1000,
      gcTime: 10 * 60 * 1000,
    },
  },
});
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Vercel Caching Documentation](https://vercel.com/docs/concepts/edge-network/caching)
- [React Query Caching](https://tanstack.com/query/latest/docs/react/guides/caching)
- [Web.dev Caching](https://web.dev/cache-api-quick-guide/)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-12-20

